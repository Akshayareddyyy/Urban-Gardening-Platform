<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fertilizer Guide - Urban Gardening</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/fertilizer.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <h2>ðŸŒ± Urban Gardening</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="suggestions.html">Plant Ideas</a></li>
                <li><a href="showcase.html">Showcase</a></li>
                <li><a href="fertilizer.html" class="active">Fertilizer Guide</a></li>
                <li class="profile-dropdown">
                    <button class="profile-btn" id="profileBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </button>
                    <div class="dropdown-menu" id="profileDropdown">
                        <a href="profile.html" class="dropdown-item">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            Profile
                        </a>
                        <a href="#" class="dropdown-item" id="logoutBtn">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Logout
                        </a>
                    </div>
                </li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <section class="fertilizer-section">
            <!-- Header -->
            <div class="fertilizer-header">
                <div class="header-icon">
                    <svg class="icon-flask" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 2v6l-3 7c-.5 1.5-.5 3.5 1 4.5h10c1.5-1 1.5-3 1-4.5L15 8V2"></path>
                        <path d="M6.5 15.5h11"></path>
                        <path d="M9 2h6"></path>
                    </svg>
                </div>
                <h1>Smart Fertilizer Guide</h1>
                <p>Confused about fertilizers? Tell us about your plant and its needs, and our AI will recommend the right nutrients for thriving growth.</p>
            </div>

            <!-- Fertilizer Form -->
            <div class="fertilizer-form-container">
                <form id="fertilizerForm" class="fertilizer-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="plantType">Plant Type *</label>
                            <input type="text" id="plantType" name="plantType" required 
                                   placeholder="Enter your plant type (e.g., Tomato, Basil, Rose, Monstera...)">
                            <div class="form-error" id="plantTypeError"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label for="growthStage">Growth Stage</label>
                            <select id="growthStage" name="growthStage">
                                <option value="seedling">Seedling</option>
                                <option value="vegetative">Vegetative Growth</option>
                                <option value="flowering">Flowering</option>
                                <option value="fruiting">Fruiting</option>
                                <option value="maintenance">Maintenance</option>
                            </select>
                        </div>

                        <div class="form-group half-width">
                            <label for="growingMedium">Growing Medium</label>
                            <select id="growingMedium" name="growingMedium">
                                <option value="soil">Soil</option>
                                <option value="potting-mix">Potting Mix</option>
                                <option value="hydroponic">Hydroponic</option>
                                <option value="coco-coir">Coco Coir</option>
                                <option value="compost">Compost</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="currentIssues">Current Issues (Optional)</label>
                            <textarea id="currentIssues" name="currentIssues" rows="3" 
                                      placeholder="Describe any issues: yellowing leaves, slow growth, poor flowering, nutrient deficiency signs..."></textarea>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label for="plantSize">Plant Size</label>
                            <select id="plantSize" name="plantSize">
                                <option value="small">Small (under 1 ft)</option>
                                <option value="medium">Medium (1-3 ft)</option>
                                <option value="large">Large (over 3 ft)</option>
                            </select>
                        </div>

                        <div class="form-group half-width">
                            <label for="fertilizerPreference">Fertilizer Type Preference</label>
                            <select id="fertilizerPreference" name="fertilizerPreference">
                                <option value="any">Any</option>
                                <option value="organic">Organic Only</option>
                                <option value="synthetic">Synthetic</option>
                                <option value="liquid">Liquid</option>
                                <option value="granular">Granular</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn" id="fertilizerSubmitBtn">
                        <span class="btn-text">Get Fertilizer Recommendations</span>
                        <div class="loading-spinner" style="display: none;">
                            <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-1 19c.32.04.64.01.95-.04"></path>
                            </svg>
                        </div>
                    </button>
                </form>
            </div>

            <!-- Loading State -->
            <div class="loading-container" id="fertilizerLoading" style="display: none;">
                <svg class="loading-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-1 19c.32.04.64.01.95-.04"></path>
                </svg>
                <p>Mixing up fertilizer advice...</p>
            </div>

            <!-- Error State -->
            <div class="error-container" id="fertilizerError" style="display: none;">
                <div class="error-alert">
                    <h3>Error Fetching Suggestions</h3>
                    <p id="fertilizerErrorMessage">Failed to get fertilizer recommendations. Please try again.</p>
                </div>
            </div>

            <!-- Fertilizer Results -->
            <div class="fertilizer-results" id="fertilizerResults" style="display: none;">
                <div class="results-header">
                    <h2>Fertilizer Recommendations</h2>
                    <button class="refresh-btn" id="refreshFertilizer">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                            <path d="M21 3v5h-5"></path>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                            <path d="M3 21v-5h5"></path>
                        </svg>
                        Get New Suggestions
                    </button>
                </div>
                <div class="fertilizer-grid" id="fertilizerGrid">
                    <!-- Fertilizer recommendations will be dynamically inserted here -->
                </div>
            </div>

            <!-- Empty State -->
            <div class="empty-fertilizer" id="emptyFertilizer" style="display: none;">
                <svg class="empty-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 2v6l-3 7c-.5 1.5-.5 3.5 1 4.5h10c1.5-1 1.5-3 1-4.5L15 8V2"></path>
                    <path d="M6.5 15.5h11"></path>
                    <path d="M9 2h6"></path>
                </svg>
                <h3>No Specific Matches</h3>
                <p>No specific fertilizer suggestions found for the given criteria. Perhaps try different keywords or broaden your search.</p>
            </div>

            <!-- NPK Information Panel -->
            <div class="npk-info-panel">
                <h3>Understanding NPK Numbers</h3>
                <div class="npk-explanations">
                    <div class="npk-item">
                        <div class="npk-letter">N</div>
                        <div class="npk-details">
                            <strong>Nitrogen</strong>
                            <p>Promotes leaf growth and green color</p>
                        </div>
                    </div>
                    <div class="npk-item">
                        <div class="npk-letter">P</div>
                        <div class="npk-details">
                            <strong>Phosphorus</strong>
                            <p>Encourages root development and flowering</p>
                        </div>
                    </div>
                    <div class="npk-item">
                        <div class="npk-letter">K</div>
                        <div class="npk-details">
                            <strong>Potassium</strong>
                            <p>Strengthens overall plant health and disease resistance</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Welcome Message -->
            <div class="welcome-message" id="welcomeMessage">
                <div class="welcome-content">
                    <svg class="welcome-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 2v6l-3 7c-.5 1.5-.5 3.5 1 4.5h10c1.5-1 1.5-3 1-4.5L15 8V2"></path>
                        <path d="M6.5 15.5h11"></path>
                        <path d="M9 2h6"></path>
                    </svg>
                    <p>Enter your plant details above to get personalized fertilizer recommendations!</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Notifications -->
    <div class="toast" id="successToast">
        <div class="toast-content">
            <svg class="toast-icon success" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 6 9 17l-5-5"></path>
            </svg>
            <div class="toast-text">
                <strong id="successTitle">Fertilizer Advice Ready!</strong>
                <span id="successMessage">We found fertilizer recommendations for your plant.</span>
            </div>
        </div>
        <button class="toast-close" onclick="hideToast('successToast')">&times;</button>
    </div>

    <div class="toast error" id="errorToast">
        <div class="toast-content">
            <svg class="toast-icon error" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <div class="toast-text">
                <strong id="errorTitle">Suggestion Error</strong>
                <span id="errorMessage">Failed to get fertilizer suggestions.</span>
            </div>
        </div>
        <button class="toast-close" onclick="hideToast('errorToast')">&times;</button>
    </div>

    <script src="../js/fertilizer.js"></script>
    <script>
        // Profile dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            const profileBtn = document.getElementById('profileBtn');
            const profileDropdown = document.getElementById('profileDropdown');
            
            if (profileBtn && profileDropdown) {
                profileBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    profileDropdown.classList.toggle('show');
                });
                
                document.addEventListener('click', function(e) {
                    if (!e.target.closest('.profile-dropdown')) {
                        profileDropdown.classList.remove('show');
                    }
                });
            }
        });
    </script>
</body>
</html>